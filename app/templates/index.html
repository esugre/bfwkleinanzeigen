{% extends "base.html" %} {% block content %}
<div class="ad-list-wrapper">
  <h1>Aktuelle Anzeigen</h1>

  {% if ads|length == 0 %}
  <p>Es wurden noch keine Anzeigen erstellt.</p>
  {% else %}
  <div class="ad-list">
    {% for ad in ads %}
    <div class="ad-card" data-id="{{ad.ad_id}}">
      <a
        class="ad-card-link"
        href="{{ url_for('ad_detail', ad_id=ad.ad_id) }}"
      ></a>

      <div class="card-img">
        {% if ad.bilder_path %}
        <img src="/{{ ad.bilder_path }}" alt="{{ ad.titel }}" />
        {% endif %}
      </div>
      <div class="card-body">
        <h2 class="ad-title">{{ ad.titel }}</h2>

        {% if ad.preis %}
        <p class="ad-price">{{ "%.2f"|format(ad.preis) }} € </p>
        {% endif %}

        <p class="ad-desc">
          {{ ad.text[:120] }}{% if ad.text|length > 120 %}...{% endif %}
        </p>

        {% if ad.categories %}
        <div class="ad-tags">
          {% for cat in ad.categories %}
          <span class="ad-tag">
            <a
              href="{{ url_for('ads_by_category', category_id=cat.category_id) }}"
            >
              {{ cat.name }}
            </a>
          </span>
          {% endfor %}
        </div>
        {% endif %}
        <small class="ad-meta">
          von {{ ad.vorname }} {{ ad.nachname }} · {{ ad.datum }}
        </small>
      </div>
    </div>
    {% endfor %}
  </div>
  {% endif %}
</div>
{% endblock %}
