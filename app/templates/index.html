{% extends "base.html" %}

{% block content %}
<h1>Aktuelle Anzeigen</h1>

{% if ads|length == 0 %}
    <p>Es wurden noch keine Anzeigen erstellt.</p>
{% else %}
    <div class="ad-list">
        {% for ad in ads %}
            <div class="ad-card">
                {% if ad.bilder_path %}
                    <img 
                        src="/{{ ad.bilder_path }}" 
                        alt="{{ ad.titel }}" 
                        style="width:200px; height:auto; display:block; margin-bottom:10px;"
                    >
                {% endif %}

                <h2>
                    <a href="{{ url_for('ad_detail', ad_id=ad.ad_id) }}">
                        {{ ad.titel }}
                    </a>
                </h2>

                {% if ad.preis is not none %}
                    <p><strong>{{ "%.2f"|format(ad.preis|float) }} €</strong></p>
                {% endif %}

                <p>{{ ad.text[:120] }}{% if ad.text|length > 120 %}...{% endif %}</p>

                <small>
                    von {{ ad.vorname }} {{ ad.nachname }}  
                    · {{ ad.datum }}
                </small>

                <p>
                    <a href="{{ url_for('ad_detail', ad_id=ad.ad_id) }}">
                        Details anzeigen
                    </a>
                </p>
            </div>
        {% endfor %}
    </div>
{% endif %}
{% endblock %}
